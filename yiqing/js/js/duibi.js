 // 基于准备好的dom，初始化echarts实例
 var myChart = echarts.init(document.getElementById('huifu'));
var dataMap = {};
function dataFormatter(obj) {
  // prettier-ignore
 
  for (var year = 2020; year <= 2011; year++) {
    var max = 0;
    var sum = 0;
    temp = obj[year];
    for (var i = 0, l = temp.length; i < l; i++) {
      max = Math.max(max, temp[i]);
      sum += temp[i];
      obj[year][i] = {
        name: pList[i],
        value: temp[i]
      };
    }
    obj[year + 'max'] = Math.floor(max / 100) * 100;
    obj[year + 'sum'] = sum;
  }
  return obj;
}
// prettier-ignore
dataMap.dataGDP = dataFormatter({
    //max : 60000,
	2020: [6969.52, 3905.64, 10012.11, 4230.53, 3905.03, 8047.26, 3620.27, 5513.7, 9247.66, 18598.69, 13417.68, 5350.17, 6554.69, 4056.76, 18366.87, 10587.42, 6590.19, 6596.1, 22557.37, 3984.1, 918.75, 3467.72, 7385.1, 2005.42, 3462.73, 248.8, 3933.72, 1933.98, 543.32, 612.61, 2604.19],
    2021: [6033.21, 3110.97, 8477.63, 3571.37, 3041.07, 6672, 3122.01, 4750.6, 8072.83, 15003.6, 11648.7, 4759.3, 5763.35, 3456.7, 15021.84, 8553.79, 5633.24, 5641.94, 18864.62, 3433.5, 819.66, 3034.58, 6379.63, 1677.8, 3081.91, 220.34, 3175.58, 1688.49, 466.1, 537.11, 2209.09],
    2022: [5007.21, 2578.03, 6921.29, 2855.23, 2388.38, 6002.54, 2662.08, 4057.4, 6694.23, 12442.87, 9705.02, 3923.11, 4983.67, 2807.41, 12078.15, 6867.7, 4757.45, 4659.99, 15844.64, 2821.11, 713.96, 2555.72, 5333.09, 1426.34, 2556.02, 185.09, 2587.72, 1399.83, 390.2, 445.36, 1886.35],
    2023: [4315, 2150.76, 6018.28, 2324.8, 1940.94, 5458.22, 2348.54, 3637.2, 5741.03, 10606.85, 8003.67, 3519.72, 4467.55, 2450.48, 10275.5, 6035.48, 4212.82, 4151.54, 13502.42, 2523.73, 642.73, 2232.86, 4725.01, 1243.43, 2312.82, 162.04, 2253.39, 1232.03, 340.65, 377.16, 1612.6]
});
// prettier-ignore
dataMap.dataPI = dataFormatter({
    //max : 4000,

	2020: [88.68, 112.38, 1400, 262.42, 589.56, 882.41, 625.61, 684.6, 90.26, 1461.51, 892.83, 966.5, 827.36, 727.37, 1963.51, 1892.01, 1082.13, 1100.65, 1428.27, 912.5, 300.75, 463.4, 1481.14, 368.94, 661.69, 48.04, 435.77, 308.06, 65.34, 72.07, 509.99],
    2021: [87.36, 105.28, 1370.43, 276.3, 522.8, 798.43, 568.69, 605.79, 83.45, 1367.58, 814.1, 950.5, 786.84, 664.5, 1778.45, 1649.29, 1020.09, 1022.45, 1248.59, 817.88, 278.76, 428.05, 1379.93, 334.5, 607.75, 44.3, 387.88, 286.78, 60.7, 65.33, 461.26],
    2022: [84.11, 89.91, 1064.05, 215.19, 420.1, 615.8, 488.23, 504.8, 81.02, 1162.45, 717.85, 749.4, 692.94, 560, 1480.67, 1198.7, 798.35, 886.47, 1072.91, 658.78, 244.29, 339.06, 1128.61, 298.69, 494.6, 40.7, 302.66, 237.91, 48.47, 55.63, 412.9],
    2023: [82.44, 84.21, 956.84, 197.8, 374.69, 590.2, 446.17, 474.2, 79.68, 1110.44, 685.2, 783.66, 664.78, 535.98, 1390, 1288.36, 707, 847.25, 1015.08, 601.99, 222.89, 317.87, 1047.95, 281.1, 463.44, 39.75, 282.21, 215.51, 47.31, 52.95, 305]
});
// prettier-ignore
dataMap.dataSI = dataFormatter({
    //max : 26600,

	2020: [2026.51, 2135.07, 5271.57, 2357.04, 1773.21, 3869.4, 1580.83, 2971.68, 4381.2, 10524.96, 7164.75, 2245.9, 3175.92, 1917.47, 10478.62, 5514.14, 2852.12, 2612.57, 11356.6, 1510.68, 240.83, 1564, 3067.23, 821.16, 1426.42, 63.52, 1951.36, 838.56, 264.61, 281.05, 1164.79],
    2021: [1853.58, 1685.93, 4301.73, 1919.4, 1248.27, 3061.62, 1329.68, 2487.04, 3892.12, 8437.99, 6250.38, 1844.9, 2770.49, 1566.4, 8478.69, 4182.1, 2320.6, 2190.54, 9280.73, 1253.7, 205.6, 1376.91, 2489.4, 681.5, 1281.63, 52.74, 1553.1, 713.3, 211.7, 244.05, 914.47],
    2022: [1487.15, 1337.31, 3417.56, 1463.38, 967.49, 2898.89, 1098.37, 2084.7, 3209.02, 6787.11, 5096.38, 1535.29, 2340.82, 1204.33, 6485.05, 3310.14, 1956.02, 1777.74, 7592.78, 984.08, 175.82, 1135.31, 2014.8, 569.37, 1047.66, 47.64, 1221.17, 572.02, 171.92, 194.27, 719.54],
    2023: [1249.99, 1069.08, 2911.69, 1134.31, 754.78, 2609.85, 943.49, 1843.6, 2622.45, 5604.49, 4090.48, 1337.04, 2036.97, 941.77, 5184.98, 2768.75, 1709.89, 1523.5, 6143.4, 846.89, 148.88, 958.87, 1733.38, 481.96, 934.88, 32.72, 1007.56, 501.69, 144.51, 153.06, 603.15]
});
// prettier-ignore
dataMap.dataTI = dataFormatter({
    //max : 25000,
	2020: [4854.33, 1658.19, 3340.54, 1611.07, 1542.26, 3295.45, 1413.83, 1857.42, 4776.2, 6612.22, 5360.1, 2137.77, 2551.41, 1411.92, 5924.74, 3181.27, 2655.94, 2882.88, 9772.5, 1560.92, 377.17, 1440.32, 2836.73, 815.32, 1374.62, 137.24, 1546.59, 787.36, 213.37, 259.49, 929.41],
    2021: [4092.27, 1319.76, 2805.47, 1375.67, 1270, 2811.95, 1223.64, 1657.77, 4097.26, 5198.03, 4584.22, 1963.9, 2206.02, 1225.8, 4764.7, 2722.4, 2292.55, 2428.95, 8335.3, 1361.92, 335.3, 1229.62, 2510.3, 661.8, 1192.53, 123.3, 1234.6, 688.41, 193.7, 227.73, 833.36],
    2022: [3435.95, 1150.81, 2439.68, 1176.65, 1000.79, 2487.85, 1075.48, 1467.9, 3404.19, 4493.31, 3890.79, 1638.42, 1949.91, 1043.08, 4112.43, 2358.86, 2003.08, 1995.78, 7178.94, 1178.25, 293.85, 1081.35, 2189.68, 558.28, 1013.76, 96.76, 1063.89, 589.91, 169.81, 195.46, 753.91],
    2023: [2982.57, 997.47, 2149.75, 992.69, 811.47, 2258.17, 958.88, 1319.4, 3038.9, 3891.92, 3227.99, 1399.02, 1765.8, 972.73, 3700.52, 1978.37, 1795.93, 1780.79, 6343.94, 1074.85, 270.96, 956.12, 1943.68, 480.37, 914.5, 89.56, 963.62, 514.83, 148.83, 171.14, 704.5]
});
// prettier-ignore
dataMap.dataEstate = dataFormatter({
    //max : 3600,

	2020: [493.73, 122.67, 330.87, 106, 98.75, 256.77, 112.29, 163.34, 715.97, 799.73, 688.86, 231.66, 331.8, 171.88, 664.9, 298.19, 217.17, 215.63, 1430.37, 165.05, 38.2, 143.88, 286.23, 76.38, 148.69, 10.02, 108.62, 63.78, 14.1, 22.97, 55.79],
    2021: [436.11, 106.14, 231.08, 95.1, 73.81, 203.1, 97.93, 137.74, 666.3, 534.17, 587.83, 188.28, 248.44, 167.2, 473.27, 236.44, 204.8, 191.5, 1103.75, 122.52, 30.64, 129.12, 264.3, 68.3, 116.54, 5.8, 95.9, 56.84, 13, 20.78, 53.55],
    2022: [341.88, 92.31, 185.19, 78.73, 61.05, 188.49, 91.99, 127.2, 487.82, 447.47, 473.16, 162.63, 215.84, 138.02, 418.21, 217.58, 176.8, 186.49, 955.66, 100.93, 25.14, 113.69, 231.72, 59.86, 103.79, 4.35, 83.9, 48.09, 11.41, 16.85, 47.84],
    2023: [298.02, 73.04, 140.89, 65.83, 51.48, 130.94, 76.11, 118.7, 384.86, 371.09, 360.63, 139.18, 188.09, 125.27, 371.13, 199.31, 145.17, 165.29, 808.16, 82.83, 21.45, 90.48, 210.82, 53.49, 95.68, 3.42, 77.68, 41.52, 9.74, 13.46, 43.04]
});
// prettier-ignore
dataMap.dataFinancial = dataFormatter({
    //max : 3200,

	2020: [840.2, 147.4, 213.47, 135.07, 72.52, 232.85, 83.63, 35.03, 675.12, 492.4, 686.32, 127.05, 186.12, 69.55, 448.36, 181.74, 127.32, 162.37, 661.81, 91.93, 13.16, 185.18, 262.26, 73.67, 130.5, 7.57, 127.58, 44.73, 20.36, 32.25, 80.34],
    2021: [713.79, 136.97, 209.1, 110.29, 55.89, 188.04, 77.17, 32.2, 612.45, 440.5, 523.49, 94.1, 171, 65.1, 343.37, 170.82, 118.85, 118.64, 602.68, 74, 11.56, 162.38, 236.5, 60.3, 118.4, 5.4, 90.1, 42.99, 19, 27.92, 70.3],
    2023: [635.56, 112.79, 199.87, 118.48, 55.89, 145.38, 73.15, 32.2, 517.97, 392.11, 451.54, 87.45, 150.09, 64.31, 329.71, 165.11, 107.31, 99.35, 534.28, 61.59, 10.68, 147.04, 206.24, 48.01, 105.48, 4.74, 77.87, 42.31, 17.98, 24.8, 64.92],
    2023: [561.91, 76.86, 179.6, 124.1, 48.39, 137.18, 75.45, 31.6, 485.25, 368.86, 347.53, 81.85, 138.28, 76.51, 310.07, 158.77, 96.95, 92.43, 454.65, 35.86, 10.08, 134.52, 183.13, 41.45, 102.39, 2.81, 67.3, 42.08, 16.75, 21.45, 52.18]
});
 // 指定图表的配置项和数据
 var option = {
  baseOption: {
    timeline: {
      axisType: 'category',
      // realtime: false,
      // loop: false,
      autoPlay: true,
      // currentIndex: 2,
      playInterval: 1000,
      // controlStyle: {
      //     position: 'left'
      // },
      data: [
        '2020-01-01',
        '2021-01-01',
        '2022-01-01',
        {
          value: '2020-01-01',
          tooltip: {
            formatter: '{b} GDP达到一个高度'
          },
          symbol: 'diamond',
          symbolSize: 16,
		   color: '#ffffff',
        },
      '2020-01-01',
      '2021-01-01',
      '2022-01-01',
        {
          value: '2023-01-01',
          tooltip: {
            formatter: function (params) {
              return params.name + 'GDP达到又一个高度';
            }
          },
          symbol: 'diamond',
          symbolSize: 18,
		    color: '#ffffff',
        }
      ],
      label: {
        formatter: function (s) {
          return new Date(s).getFullYear();
        }
      }
    },
 
    tooltip: {},
    legend: {
      left: 'right',
      data: ['口罩业', '服务业', '对外贸易'],
      selected: {
        GDP: false,
        金融: false,
        房地产: false
      }
    },
    calculable: true,
    grid: {
      top: 80,
      bottom: 100,
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'shadow',
          label: {
            show: true,
            formatter: function (params) {
              return params.value.replace('\n', '');
            }
          }
        }
      }
    },
    xAxis: [
      {
        type: 'category',
        axisLabel: { interval: 0 },
        data: [
          '瑞典',
          '\n澳大利亚',
          '韩国',
          '\n英国',
          '阿根廷',
          '\n巴西',
          '瑞士',
          '\n白俄罗斯',
          '中国',
          '\n朝鲜',
          '哈萨克斯坦',
          '\n乌克兰',
          '菲律宾',
          '\n土耳其',
          '美国',
          '\n伊朗',
          '尼泊尔',
          '\n缅甸',
          '俄罗斯',
          '\n意大利',
          '老挝',
          '\n马来西亚',
          '法国',
          '\n印度尼西亚',
          '巴基斯坦',
          '\n孟加拉国',
          '德国',
          '\n土库曼斯坦',
          '埃及',
          '\n冰岛',
          '西班牙'
        ],
        splitLine: { show: false }
      }
    ],
    yAxis: [
      {
        type: 'value',
      }
    ],
    series: [
      { name: 'GDP', type: 'bar' },
      { name: '金融', type: 'bar' },
      { name: '房地产', type: 'bar' },
      { name: '口罩业', type: 'bar' },
      { name: '服务业', type: 'bar' },
      { name: '对外贸易', type: 'bar' },
      {
        name: 'GDP占比',
        type: 'pie',
        center: ['75%', '35%'],
        radius: '28%',
        z: 100
      }
    ]
  },
  options: [
    {
      title: { text: '2020国内外新冠疫情口罩业，服务业，对外贸易对比' },
      series: [
        { data: dataMap.dataGDP['2020'] },
        { data: dataMap.dataFinancial['2020'] },
        { data: dataMap.dataEstate['2020'] },
        { data: dataMap.dataPI['2020'] },
        { data: dataMap.dataSI['2020'] },
        { data: dataMap.dataTI['2020'] },
        {
          data: [
            { name: '口罩业', value: dataMap.dataPI['2020'] },
            { name: '服务业', value: dataMap.dataSI['2020'] },
            { name: '对外贸易', value: dataMap.dataTI['2020'] }
          ]
        }
      ]
    },
    {
      title: { text: '2021国内外新冠疫情口罩业，服务业，对外贸易对比', color: '#ffffff', },
      series: [
        { data: dataMap.dataGDP['2021'] },
        { data: dataMap.dataFinancial['2021'] },
        { data: dataMap.dataEstate['2021'] },
        { data: dataMap.dataPI['2021'] },
        { data: dataMap.dataSI['2021'] },
        { data: dataMap.dataTI['2021'] },
        {
          data: [
            { name: '口罩业', value: dataMap.dataPI['2021'] },
            { name: '服务业', value: dataMap.dataSI['2021'] },
            { name: '对外贸易', value: dataMap.dataTI['2021'] }
          ]
        }
      ]
    },
    {
      title: { text: '2022国内外新冠疫情口罩业，服务业，对外贸易对比', color: '#ffffff', },
      series: [
        { data: dataMap.dataGDP['2022'] },
        { data: dataMap.dataFinancial['2022'] },
        { data: dataMap.dataEstate['2022'] },
        { data: dataMap.dataPI['2022'] },
        { data: dataMap.dataSI['2022'] },
        { data: dataMap.dataTI['2022'] },
        {
          data: [
            { name: '口罩业', value: dataMap.dataPI['2022'] },
            { name: '服务业', value: dataMap.dataSI['2022'] },
            { name: '对外贸易', value: dataMap.dataTI['2022'] }
          ]
        }
      ]
    },
    {
      title: { text: '2023国内外新冠疫情口罩业，服务业，对外贸易对比' },
      series: [
        { data: dataMap.dataGDP['2023'] },
        { data: dataMap.dataFinancial['2023'] },
        { data: dataMap.dataEstate['2023'] },
        { data: dataMap.dataPI['2023'] },
        { data: dataMap.dataSI['2023'] },
        { data: dataMap.dataTI['2023'] },
        {
          data: [
            { name: '口罩业', value: dataMap.dataPI['2023'] },
            { name: '服务业', value: dataMap.dataSI['2023'] },
            { name: '对外贸易', value: dataMap.dataTI['2023'] }
          ]
        }
      ]
    }
  ]
};

 // 使用刚指定的配置项和数据显示图表。
 myChart.setOption(option);